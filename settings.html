<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Basic JSON Editor Example</title>
    <script src="lib/jsoneditor.js"></script>
  </head>
  <body>
    <h1>Basic JSON Editor Example</h1>
    
    <div id='editor_holder'></div>
    <button id='submit'>Submit (console.log)</button>
    
    <script>
      // https://github.com/jdorn/json-editor/blob/master/examples/basic.html
	  const storage = require('electron-json-storage');
		var editor;
		storage.getAll(function(error, data) {
		  if (error) throw error;
		 
		  console.log(data);

      
      console.log(234);
      
      yaml = require('js-yaml');
      fs   = require('fs');
      var file = data.vagrant.path + '/vvv-custom.yml';
      // Get document, or throw exception on error
      try {
        var doc = yaml.safeLoad(fs.readFileSync(file, 'utf8'));
        console.log(JSON.stringify(doc));
      } catch (e) {
        console.log(e);
      }
      
      
      
      
		  editor = new JSONEditor(document.getElementById('editor_holder'),{
			schema: {
			  type: "object",
			  title: "Car",
			  properties: {
          sites : {
            type: "object",
            patternProperties:{
            ".*":{
              type:"object",
              properties: {
                repo : {
                  type: "string",
                  enum: [
                    'https://github.com/exlame/custom-site-template-develop.git'
                  ]
                },
                hosts : {
                  type: "array",
                  items : {
                    type: "string",
                  default: "",
                  
                  "examples": [
                      "vvv.test"
                    ]
                  }
                },
                nginx_upstream : {
                  type: "string",
                  enum : [
                    'php56',
                    'php70',
                    'php71'
                  ],
                default: "php71"
                }
              }
            }
          }
        },
        utilities: {
          type: "object",
          properties : {
            core : {
              type: "array",
              items: {
                type: "string"
              }
            }
          }
        },
        
          make: {
            type: "string",
            enum: [
            "Toyota",
            "BMW",
            "Honda",
            "Ford",
            "Chevy",
            "VW"
            ]
          },
          model: {
            type: "string"
          },
          year: {
            type: "integer",
            enum: [
            1995,1996,1997,1998,1999,
            2000,2001,2002,2003,2004,
            2005,2006,2007,2008,2009,
            2010,2011,2012,2013,2014
            ],
            default: 2008
          }
			  }
			},
      startval : {
        make: 'Toyota',
        model: "123123",
        year: 2009
      }
		  });
		});
			
	  
      
      
      // Hook up the submit button to log to the console
      document.getElementById('submit').addEventListener('click',function() {
        // Get the value from the editor
        console.log(editor.getValue());
      });
    </script>
  </body>
</html>